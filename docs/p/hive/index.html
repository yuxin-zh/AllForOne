<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='[TOC]
1.Hive Introduction   HIveæ˜¯ä¸€ä¸ªå¼€æºçš„ æ•°æ®ä»“åº“è½¯ä»¶ï¼Œç”¨äºreadï¼Œwriteï¼Œmanageç›´æ¥å­˜å‚¨åœ¨HDFSä¸­çš„å¤§å‹æ•°æ®é›†æ–‡ä»¶
  HQLç”¨äºæ•°æ®æŸ¥è¯¢å’Œåˆ†æ
  HIveæ˜¯åŸºäºè¯»å–çš„å› æ­¤ä¸é€‚ç”¨äºé«˜é¢‘ç‡å†™å…¥æ“ä½œçš„äº‹åŠ¡å¤„ç†
  HIveåŠŸèƒ½
 æå–/è½¬è½½/åŠ è½½ ï¼ˆETLï¼‰æ•°æ® å­˜å‚¨ æŸ¥è¯¢å’Œåˆ†æHDFSæˆ–Hbaseä¸­å­˜å‚¨çš„å¤§è§„æ¨¡æ•°æ® æŸ¥è¯¢æ˜¯é€šè¿‡MapReduceå®Œæˆçš„ï¼ŒNoticeğŸ‰ï¼šå¹¶éæ‰€æœ‰æŸ¥è¯¢éƒ½éœ€è¦Mapreduce  Extensionï¼šhiveä¸ºäº†æ‰§è¡Œæ•ˆç‡è€ƒè™‘ï¼Œç®€å•çš„æŸ¥è¯¢å¦‚selectï¼Œä¸å¸¦countï¼Œsum,group byğŸ˜€è¿™æ ·çš„éƒ½ä¸èµ°mapreduceï¼Œç›´æ¥è¯»å–hdfsæ–‡ä»¶è¿›è¡Œfilterè¿‡æ»¤ å½“æŸ¥è¯¢è¯­å¥ä¸­çš„è¿‡æ»¤æ¡ä»¶åªæ˜¯åˆ†åŒºå­—æ®µçš„æƒ…å†µä¸‹ä¸ä¼šè¿›è¡Œmapreduce   hive-site-xml æœ‰ä¸ªé…ç½®å‚æ•°hive.fetch.task.conversion = moreå°†è¯¥å‚æ•°è®¾ç½®ä¸ºmoreæ—¶ï¼Œç®€å•æŸ¥è¯¢å°±ä¸ä¼šèµ°mapreduceäº†ï¼Œè‰²æ¹–ä¹‹ä¸ºminimalï¼Œé‚£ä¹ˆä»»ä½•æŸ¥è¯¢éƒ½ä¼šèµ°mapreduceğŸš©    Hiveå…è®¸ç”¨æˆ·ç¼–å†™è‡ªå·±çš„å‡½æ•°,æœ‰å¦‚ä¸‹ä¸‰ç§ç±»å‹ï¼š
 ç”¨æˆ·å®šä¹‰å‡½æ•° UDF ç”¨æˆ·å®šä¹‰èšåˆå‡½æ•° UDAF ç”¨æˆ·å®šä¹‰çš„è¡¨ç”Ÿæˆå‡½æ•° UDTF    Hiveç¼ºç‚¹ï¼š
 ä¸æ”¯æŒå¤„ç†session æ— æ³•ä¿®æ”¹è¡¨æ•°æ®ï¼ˆæ— æ³•æ›´æ–°ã€åˆ é™¤ã€æ’å…¥ï¼‰åªèƒ½é€šè¿‡æ–‡ä»¶è¿½åŠ å’Œé‡æ–°å¯¼å…¥æ•°æ® æ— æ³•ä¸ºåˆ—ç¼–åˆ¶ç´¢å¼•ï¼ˆæ”¯æŒç´¢å¼•ï¼Œä½†æ— æ³•æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼‰    Hiveæ•°æ®å­˜å‚¨
  Hiveå¯ä»¥è§£ææ•°æ®ï¼Œæ‰€ä»¥å°†æ•°æ®å¯¼å…¥Hiveè¡¨åªéœ€å°†æ•°æ®ç§»åŠ¨åˆ°è¡¨æ‰€åœ¨çš„ç›®å½•ï¼ˆæ•°æ®åœ¨HDFSï¼‰,å¦‚æœæ•°æ®åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œåˆ™éœ€è¦å°†æ•°æ®å¤åˆ¶åˆ°è¡¨æ‰€åœ¨çš„ç›®å½•ä¸­ã€‚ğŸ€„
  ä»æœ¬åœ°ï¼šExampleï¼šåœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿèˆ¹èˆ°ä¸€ä¸ªåä¸ºlocal.txtçš„æ–‡ä»¶ï¼ˆæ•°æ®ä¹‹é—´ç©ºæ ¼é—´éš”ï¼‰ï¼Œç„¶åæ‰§è¡Œäº†load data local inpath&#39;ç»å¯¹è·¯å¾„/local.txt into table local;å°±å¯ä»¥ ä½¿ç”¨hadoop fs -ls'><title>Hive</title>

<link rel='canonical' href='https://yuxin-zh.github.io/AllForOne/p/hive/'>

<link rel="stylesheet" href="/AllForOne/scss/style.min.df3f8ce6bc6b6b400b5f6141ab1b71f0180e52f4bc579ce3d854bd3aa58868a4.css"><meta property='og:title' content='Hive'>
<meta property='og:description' content='[TOC]
1.Hive Introduction   HIveæ˜¯ä¸€ä¸ªå¼€æºçš„ æ•°æ®ä»“åº“è½¯ä»¶ï¼Œç”¨äºreadï¼Œwriteï¼Œmanageç›´æ¥å­˜å‚¨åœ¨HDFSä¸­çš„å¤§å‹æ•°æ®é›†æ–‡ä»¶
  HQLç”¨äºæ•°æ®æŸ¥è¯¢å’Œåˆ†æ
  HIveæ˜¯åŸºäºè¯»å–çš„å› æ­¤ä¸é€‚ç”¨äºé«˜é¢‘ç‡å†™å…¥æ“ä½œçš„äº‹åŠ¡å¤„ç†
  HIveåŠŸèƒ½
 æå–/è½¬è½½/åŠ è½½ ï¼ˆETLï¼‰æ•°æ® å­˜å‚¨ æŸ¥è¯¢å’Œåˆ†æHDFSæˆ–Hbaseä¸­å­˜å‚¨çš„å¤§è§„æ¨¡æ•°æ® æŸ¥è¯¢æ˜¯é€šè¿‡MapReduceå®Œæˆçš„ï¼ŒNoticeğŸ‰ï¼šå¹¶éæ‰€æœ‰æŸ¥è¯¢éƒ½éœ€è¦Mapreduce  Extensionï¼šhiveä¸ºäº†æ‰§è¡Œæ•ˆç‡è€ƒè™‘ï¼Œç®€å•çš„æŸ¥è¯¢å¦‚selectï¼Œä¸å¸¦countï¼Œsum,group byğŸ˜€è¿™æ ·çš„éƒ½ä¸èµ°mapreduceï¼Œç›´æ¥è¯»å–hdfsæ–‡ä»¶è¿›è¡Œfilterè¿‡æ»¤ å½“æŸ¥è¯¢è¯­å¥ä¸­çš„è¿‡æ»¤æ¡ä»¶åªæ˜¯åˆ†åŒºå­—æ®µçš„æƒ…å†µä¸‹ä¸ä¼šè¿›è¡Œmapreduce   hive-site-xml æœ‰ä¸ªé…ç½®å‚æ•°hive.fetch.task.conversion = moreå°†è¯¥å‚æ•°è®¾ç½®ä¸ºmoreæ—¶ï¼Œç®€å•æŸ¥è¯¢å°±ä¸ä¼šèµ°mapreduceäº†ï¼Œè‰²æ¹–ä¹‹ä¸ºminimalï¼Œé‚£ä¹ˆä»»ä½•æŸ¥è¯¢éƒ½ä¼šèµ°mapreduceğŸš©    Hiveå…è®¸ç”¨æˆ·ç¼–å†™è‡ªå·±çš„å‡½æ•°,æœ‰å¦‚ä¸‹ä¸‰ç§ç±»å‹ï¼š
 ç”¨æˆ·å®šä¹‰å‡½æ•° UDF ç”¨æˆ·å®šä¹‰èšåˆå‡½æ•° UDAF ç”¨æˆ·å®šä¹‰çš„è¡¨ç”Ÿæˆå‡½æ•° UDTF    Hiveç¼ºç‚¹ï¼š
 ä¸æ”¯æŒå¤„ç†session æ— æ³•ä¿®æ”¹è¡¨æ•°æ®ï¼ˆæ— æ³•æ›´æ–°ã€åˆ é™¤ã€æ’å…¥ï¼‰åªèƒ½é€šè¿‡æ–‡ä»¶è¿½åŠ å’Œé‡æ–°å¯¼å…¥æ•°æ® æ— æ³•ä¸ºåˆ—ç¼–åˆ¶ç´¢å¼•ï¼ˆæ”¯æŒç´¢å¼•ï¼Œä½†æ— æ³•æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼‰    Hiveæ•°æ®å­˜å‚¨
  Hiveå¯ä»¥è§£ææ•°æ®ï¼Œæ‰€ä»¥å°†æ•°æ®å¯¼å…¥Hiveè¡¨åªéœ€å°†æ•°æ®ç§»åŠ¨åˆ°è¡¨æ‰€åœ¨çš„ç›®å½•ï¼ˆæ•°æ®åœ¨HDFSï¼‰,å¦‚æœæ•°æ®åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œåˆ™éœ€è¦å°†æ•°æ®å¤åˆ¶åˆ°è¡¨æ‰€åœ¨çš„ç›®å½•ä¸­ã€‚ğŸ€„
  ä»æœ¬åœ°ï¼šExampleï¼šåœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿèˆ¹èˆ°ä¸€ä¸ªåä¸ºlocal.txtçš„æ–‡ä»¶ï¼ˆæ•°æ®ä¹‹é—´ç©ºæ ¼é—´éš”ï¼‰ï¼Œç„¶åæ‰§è¡Œäº†load data local inpath&#39;ç»å¯¹è·¯å¾„/local.txt into table local;å°±å¯ä»¥ ä½¿ç”¨hadoop fs -ls'>
<meta property='og:url' content='https://yuxin-zh.github.io/AllForOne/p/hive/'>
<meta property='og:site_name' content='AllForOne&#39;s Site,Your genneration comes!'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2022-02-23T15:24:22&#43;08:00'/><meta property='article:modified_time' content='2022-02-23T15:24:22&#43;08:00'/><meta property='og:image' content='https://yuxin-zh.github.io/AllForOne/p/hive/b2.webp' />
<meta name="twitter:title" content="Hive">
<meta name="twitter:description" content="[TOC]
1.Hive Introduction   HIveæ˜¯ä¸€ä¸ªå¼€æºçš„ æ•°æ®ä»“åº“è½¯ä»¶ï¼Œç”¨äºreadï¼Œwriteï¼Œmanageç›´æ¥å­˜å‚¨åœ¨HDFSä¸­çš„å¤§å‹æ•°æ®é›†æ–‡ä»¶
  HQLç”¨äºæ•°æ®æŸ¥è¯¢å’Œåˆ†æ
  HIveæ˜¯åŸºäºè¯»å–çš„å› æ­¤ä¸é€‚ç”¨äºé«˜é¢‘ç‡å†™å…¥æ“ä½œçš„äº‹åŠ¡å¤„ç†
  HIveåŠŸèƒ½
 æå–/è½¬è½½/åŠ è½½ ï¼ˆETLï¼‰æ•°æ® å­˜å‚¨ æŸ¥è¯¢å’Œåˆ†æHDFSæˆ–Hbaseä¸­å­˜å‚¨çš„å¤§è§„æ¨¡æ•°æ® æŸ¥è¯¢æ˜¯é€šè¿‡MapReduceå®Œæˆçš„ï¼ŒNoticeğŸ‰ï¼šå¹¶éæ‰€æœ‰æŸ¥è¯¢éƒ½éœ€è¦Mapreduce  Extensionï¼šhiveä¸ºäº†æ‰§è¡Œæ•ˆç‡è€ƒè™‘ï¼Œç®€å•çš„æŸ¥è¯¢å¦‚selectï¼Œä¸å¸¦countï¼Œsum,group byğŸ˜€è¿™æ ·çš„éƒ½ä¸èµ°mapreduceï¼Œç›´æ¥è¯»å–hdfsæ–‡ä»¶è¿›è¡Œfilterè¿‡æ»¤ å½“æŸ¥è¯¢è¯­å¥ä¸­çš„è¿‡æ»¤æ¡ä»¶åªæ˜¯åˆ†åŒºå­—æ®µçš„æƒ…å†µä¸‹ä¸ä¼šè¿›è¡Œmapreduce   hive-site-xml æœ‰ä¸ªé…ç½®å‚æ•°hive.fetch.task.conversion = moreå°†è¯¥å‚æ•°è®¾ç½®ä¸ºmoreæ—¶ï¼Œç®€å•æŸ¥è¯¢å°±ä¸ä¼šèµ°mapreduceäº†ï¼Œè‰²æ¹–ä¹‹ä¸ºminimalï¼Œé‚£ä¹ˆä»»ä½•æŸ¥è¯¢éƒ½ä¼šèµ°mapreduceğŸš©    Hiveå…è®¸ç”¨æˆ·ç¼–å†™è‡ªå·±çš„å‡½æ•°,æœ‰å¦‚ä¸‹ä¸‰ç§ç±»å‹ï¼š
 ç”¨æˆ·å®šä¹‰å‡½æ•° UDF ç”¨æˆ·å®šä¹‰èšåˆå‡½æ•° UDAF ç”¨æˆ·å®šä¹‰çš„è¡¨ç”Ÿæˆå‡½æ•° UDTF    Hiveç¼ºç‚¹ï¼š
 ä¸æ”¯æŒå¤„ç†session æ— æ³•ä¿®æ”¹è¡¨æ•°æ®ï¼ˆæ— æ³•æ›´æ–°ã€åˆ é™¤ã€æ’å…¥ï¼‰åªèƒ½é€šè¿‡æ–‡ä»¶è¿½åŠ å’Œé‡æ–°å¯¼å…¥æ•°æ® æ— æ³•ä¸ºåˆ—ç¼–åˆ¶ç´¢å¼•ï¼ˆæ”¯æŒç´¢å¼•ï¼Œä½†æ— æ³•æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼‰    Hiveæ•°æ®å­˜å‚¨
  Hiveå¯ä»¥è§£ææ•°æ®ï¼Œæ‰€ä»¥å°†æ•°æ®å¯¼å…¥Hiveè¡¨åªéœ€å°†æ•°æ®ç§»åŠ¨åˆ°è¡¨æ‰€åœ¨çš„ç›®å½•ï¼ˆæ•°æ®åœ¨HDFSï¼‰,å¦‚æœæ•°æ®åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œåˆ™éœ€è¦å°†æ•°æ®å¤åˆ¶åˆ°è¡¨æ‰€åœ¨çš„ç›®å½•ä¸­ã€‚ğŸ€„
  ä»æœ¬åœ°ï¼šExampleï¼šåœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿèˆ¹èˆ°ä¸€ä¸ªåä¸ºlocal.txtçš„æ–‡ä»¶ï¼ˆæ•°æ®ä¹‹é—´ç©ºæ ¼é—´éš”ï¼‰ï¼Œç„¶åæ‰§è¡Œäº†load data local inpath&#39;ç»å¯¹è·¯å¾„/local.txt into table local;å°±å¯ä»¥ ä½¿ç”¨hadoop fs -ls"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://yuxin-zh.github.io/AllForOne/p/hive/b2.webp' />
    </head>
    <body class="
    article-page has-toc
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    
        extended
    
">
    
        <div id="article-toolbar">
            <a href="/AllForOne" class="back-home">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



                <span>Back</span>
            </a>
        </div>
    
<main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/AllForOne/p/hive/">
                <img src="/AllForOne/p/hive/b2_hu887bbe02e80c5e80bd313f1fc9a20233_9408_800x0_resize_q75_h2_box_2.webp"
                        srcset="/AllForOne/p/hive/b2_hu887bbe02e80c5e80bd313f1fc9a20233_9408_800x0_resize_q75_h2_box_2.webp 800w, /AllForOne/p/hive/b2_hu887bbe02e80c5e80bd313f1fc9a20233_9408_1600x0_resize_q75_h2_box_2.webp 1600w"
                        width="800" 
                        height="433" 
                        loading="lazy"
                        alt="Featured image of post Hive" />
                
            </a>
        </div>
    

    <div class="article-details">
    

    <h2 class="article-title">
        <a href="/AllForOne/p/hive/">Hive</a>
    </h2>

    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Feb 23, 2022</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    2 minute read
                </time>
            </div>
        
    </footer>
    
</div>
</header>

    <section class="article-content">
    
    
    <p>[TOC]</p>
<h2 id="1hive-introduction">1.Hive Introduction</h2>
<ul>
<li>
<p>HIveæ˜¯ä¸€ä¸ªå¼€æºçš„ <strong>æ•°æ®ä»“åº“</strong>è½¯ä»¶ï¼Œç”¨äºreadï¼Œwriteï¼Œmanageç›´æ¥å­˜å‚¨åœ¨HDFSä¸­çš„å¤§å‹æ•°æ®é›†æ–‡ä»¶</p>
</li>
<li>
<p>HQLç”¨äºæ•°æ®æŸ¥è¯¢å’Œåˆ†æ</p>
</li>
<li>
<p>HIveæ˜¯åŸºäºè¯»å–çš„å› æ­¤ä¸é€‚ç”¨äºé«˜é¢‘ç‡å†™å…¥æ“ä½œçš„äº‹åŠ¡å¤„ç†</p>
</li>
<li>
<p>HIveåŠŸèƒ½</p>
<ul>
<li>æå–/è½¬è½½/åŠ è½½ ï¼ˆETLï¼‰æ•°æ®</li>
<li>å­˜å‚¨ æŸ¥è¯¢å’Œåˆ†æHDFSæˆ–Hbaseä¸­å­˜å‚¨çš„å¤§è§„æ¨¡æ•°æ®</li>
<li><strong>æŸ¥è¯¢æ˜¯é€šè¿‡MapReduceå®Œæˆçš„ï¼ŒNoticeğŸ‰ï¼šå¹¶éæ‰€æœ‰æŸ¥è¯¢éƒ½éœ€è¦Mapreduce</strong>
<ul>
<li>Extensionï¼šhiveä¸ºäº†æ‰§è¡Œæ•ˆç‡è€ƒè™‘ï¼Œç®€å•çš„æŸ¥è¯¢å¦‚selectï¼Œä¸å¸¦countï¼Œsum,group byğŸ˜€è¿™æ ·çš„éƒ½ä¸èµ°mapreduceï¼Œç›´æ¥è¯»å–hdfsæ–‡ä»¶è¿›è¡Œfilterè¿‡æ»¤</li>
<li>å½“æŸ¥è¯¢è¯­å¥ä¸­çš„è¿‡æ»¤æ¡ä»¶åªæ˜¯åˆ†åŒºå­—æ®µçš„æƒ…å†µä¸‹ä¸ä¼šè¿›è¡Œmapreduce</li>
</ul>
</li>
<li>hive-site-xml æœ‰ä¸ªé…ç½®å‚æ•°<code>hive.fetch.task.conversion = more</code>å°†è¯¥å‚æ•°è®¾ç½®ä¸ºmoreæ—¶ï¼Œç®€å•æŸ¥è¯¢å°±ä¸ä¼šèµ°mapreduceäº†ï¼Œè‰²æ¹–ä¹‹ä¸ºminimalï¼Œé‚£ä¹ˆä»»ä½•æŸ¥è¯¢éƒ½ä¼šèµ°mapreduceğŸš©</li>
</ul>
</li>
<li>
<p>Hiveå…è®¸ç”¨æˆ·ç¼–å†™è‡ªå·±çš„å‡½æ•°,æœ‰å¦‚ä¸‹ä¸‰ç§ç±»å‹ï¼š</p>
<ul>
<li>ç”¨æˆ·å®šä¹‰å‡½æ•° UDF</li>
<li>ç”¨æˆ·å®šä¹‰èšåˆå‡½æ•° UDAF</li>
<li>ç”¨æˆ·å®šä¹‰çš„è¡¨ç”Ÿæˆå‡½æ•° UDTF</li>
</ul>
</li>
<li>
<p>Hiveç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¸æ”¯æŒå¤„ç†session</li>
<li>æ— æ³•ä¿®æ”¹è¡¨æ•°æ®ï¼ˆæ— æ³•æ›´æ–°ã€åˆ é™¤ã€æ’å…¥ï¼‰åªèƒ½é€šè¿‡æ–‡ä»¶è¿½åŠ å’Œé‡æ–°å¯¼å…¥æ•°æ®</li>
<li>æ— æ³•ä¸ºåˆ—ç¼–åˆ¶ç´¢å¼•ï¼ˆæ”¯æŒç´¢å¼•ï¼Œä½†æ— æ³•æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼‰</li>
</ul>
</li>
<li>
<p>Hiveæ•°æ®å­˜å‚¨</p>
<ul>
<li>
<p>Hiveå¯ä»¥è§£ææ•°æ®ï¼Œæ‰€ä»¥å°†æ•°æ®å¯¼å…¥Hiveè¡¨åªéœ€å°†æ•°æ®ç§»åŠ¨åˆ°è¡¨æ‰€åœ¨çš„ç›®å½•ï¼ˆæ•°æ®åœ¨HDFSï¼‰,å¦‚æœæ•°æ®åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œåˆ™éœ€è¦å°†æ•°æ®å¤åˆ¶åˆ°è¡¨æ‰€åœ¨çš„ç›®å½•ä¸­ã€‚ğŸ€„</p>
</li>
<li>
<p>ä»æœ¬åœ°ï¼šExampleï¼šåœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿèˆ¹èˆ°ä¸€ä¸ªåä¸ºlocal.txtçš„æ–‡ä»¶ï¼ˆæ•°æ®ä¹‹é—´ç©ºæ ¼é—´éš”ï¼‰ï¼Œç„¶åæ‰§è¡Œäº†<code>load data local inpath'ç»å¯¹è·¯å¾„/local.txt into table local;å°±å¯ä»¥ ä½¿ç”¨</code>hadoop fs -ls</p>
<p>è·¯å¾„/local æŸ¥çœ‹æ˜¯å¦å¯¼å…¥æˆåŠŸ</p>
</li>
<li>
<p>ä»HDFS:åœ¨HIveä¸­åˆ›å»ºdata_hdfsè¡¨ï¼Œè¡¨ä¸­å‡è®¾æœ‰ä¸¤ä¸ªå­—æ®µï¼šname,age;</p>
<p>å°†æ–‡ä»¶ä»æœ¬åœ°ä¸Šä¼ åˆ°hdfsï¼š<code>hadoop fs -put data_hdfs.txt /data</code></p>
<p>hiveå¯¼å…¥`load data inpath &lsquo;data/data_hdfs.txt&rsquo; into table data_hdfs;</p>
</li>
</ul>
</li>
<li>
<p>HIveå®¢æˆ·ç«¯</p>
<ul>
<li>
<p>Thrift Serverï¼šä¸ºæ‰€æœ‰æ”¯æŒThriftçš„ç¼–ç¨‹è¯­è¨€çš„è¯·iå»æä¾›æœåŠ¡ï¼ˆå‡ ä¹æ‰€æœ‰ä¸»æµè¯­è¨€ï¼‰</p>
</li>
<li>
<p>Thriftå®é™…ä¸Šæ˜¯å®ç°äº†C/Sæ¨¡å¼ï¼Œé€šè¿‡ä»£ç ç”Ÿæˆå·¥å…·å°†thriftæ–‡ç”ŸæˆæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ä»£ç ï¼ˆå¯ä»¥ä¸ºä¸åŒè¯­è¨€ï¼‰ï¼Œä»è€Œå®ç°æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è·¨è¯­è¨€çš„æ”¯æŒã€‚ç”¨æˆ·åœ¨Thirftæ–‡ä»¶ä¸­å£°æ˜è‡ªå·±çš„æœåŠ¡ï¼Œè¿™äº›æœåŠ¡ç»è¿‡ç¼–è¯‘åä¼šç”Ÿæˆç›¸åº”è¯­è¨€çš„ä»£ç æ–‡ä»¶ï¼Œç„¶åå®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡ï¼ŒæœåŠ¡å™¨ç«¯ææœåŠ¡ä¾¿å¯ä»¥äº†ã€‚</p>
</li>
<li>
<p>Thriftæ˜¯Facebookäº2007å¹´å¼€å‘çš„è·¨è¯­è¨€çš„rpcæœæ¡†æ¶ï¼Œæä¾›å¤šè¯­è¨€çš„ç¼–è¯‘åŠŸèƒ½ï¼Œå¹¶æä¾›å¤šç§æœåŠ¡å™¨å·¥åšæ¨¡å¼ï¼›ç”¨æˆ·ç»è¿‡Thriftçš„IDLï¼ˆæ¥å£å®šä¹‰è¯­è¨€ï¼‰æ¥æè¿°æ¥å£å‡½æ•°åŠæ•°æ®ç±»å‹ï¼Œè€Œåç»è¿‡Thriftçš„ç¼–è¯‘ç¯å¢ƒç”Ÿæˆå„ç±»è¯­è¨€ç±»å‹çš„æ¥å£æ–‡ä»¶ï¼Œç”¨æˆ·èƒ½å¤Ÿæ ¹æ®æœ¬èº«çš„é¡»è¦é‡‡ç”¨ä¸ä¸€æ ·çš„è¯­è¨€å¼€å‘å®¢æˆ·ç«¯ä»£ç å’ŒæœåŠ¡å™¨ç«¯ä»£ç ã€‚git</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘æƒ³å¼€å‘ä¸€ä¸ªå¿«é€Ÿè®¡ç®—çš„RPCæœåŠ¡ï¼Œå®ƒä¸»è¦ç»è¿‡æ¥å£å‡½æ•°getIntå¯¹å¤–æä¾›æœåŠ¡ï¼Œè¿™ä¸ªRPCæœåŠ¡çš„getIntå‡½æ•°ä½¿ç”¨ç”¨æˆ·ä¼ å…¥çš„å‚æ•°ï¼Œé€šè¿‡å¤æ‚çš„è®¡ç®—ï¼Œè®¡ç®—å‡ºä¸€ä¸ªæ•´å½¢å€¼è¿”å›ç»™ç”¨æˆ·ï¼›æœåŠ¡å™¨ç«¯ä½¿ç”¨javaè¯­è¨€å¼€å‘ï¼Œè€Œè°ƒç”¨å®¢æˆ·ç«¯èƒ½å¤Ÿæ˜¯javaã€cã€pythonç­‰è¯­è¨€å¼€å‘çš„ç¨‹åºï¼Œåœ¨è¿™ç§åº”ç”¨åœºæ™¯ä¸‹ï¼Œå’±ä»¬åªé¡»è¦ä½¿ç”¨Thriftçš„IDLæè¿°ä¸€ä¸‹getIntå‡½æ•°ï¼ˆä»¥.thriftä¸ºåç¼€çš„æ–‡ä»¶ï¼‰ï¼Œè€Œåä½¿ç”¨Thriftçš„å¤šè¯­è¨€ç¼–è¯‘åŠŸèƒ½ï¼Œå°†è¿™ä¸ªIDLæ–‡ä»¶ç¼–è¯‘æˆCã€javaã€pythonå‡ ç§è¯­è¨€å¯¹åº”çš„â€œç‰¹å®šè¯­è¨€æ¥å£æ–‡ä»¶â€ï¼ˆæ¯ç§è¯­è¨€åªé¡»è¦ä¸€æ¡ç®€å•çš„å‘½ä»¤ä¾¿å¯ç¼–è¯‘å®Œæˆï¼‰ï¼Œè¿™æ ·æ‹¿åˆ°å¯¹åº”è¯­è¨€çš„â€œç‰¹å®šè¯­è¨€æ¥å£æ–‡ä»¶â€ä»¥åï¼Œå°±èƒ½å¤Ÿå¼€å‘å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„ä»£ç äº†ï¼Œå¼€å‘è¿‡ç¨‹å½“ä¸­åªè¦æ¥å£ä¸å˜ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„å¼€å‘èƒ½å¤Ÿç‹¬ç«‹çš„è¿›è¡Œã€‚apa</p>
</li>
<li>
<p>JDBC Driverï¼šç”¨äºhiveå’Œjavaä¹‹é—´å»ºç«‹è¿æ¥</p>
</li>
<li>
<p><strong>ODBC Driver</strong>ï¼šå…è®¸è‡ªæŒODBCåè®®çš„åº”ç”¨ç¨‹åºè¿æ¥åˆ°hive ğŸ·</p>
</li>
</ul>
</li>
<li>
<p>HIve Service</p>
<ul>
<li>HIve CLI ï¼šæ˜¯ä¸€ä¸ªshellï¼Œç”¨äº<strong>æ‰§è¡ŒHiveæŸ¥è¯¢å’Œå‘½ä»¤</strong></li>
<li>HIve Web User Interface:hive cliçš„æ›¿ä»£ï¼Œæä¾›äº†ç›¸åº”åŠŸèƒ½çš„åŸºäºwebçš„GUI</li>
<li>HIve Metastoreï¼šä¸€ä¸ª <strong>ä¸­å¤®å­˜å‚¨åº“</strong>ï¼Œå­˜å‚¨ä»“åº“ä¸­çš„<strong>å„ç§è¡¨å’Œåˆ†åŒºçš„æ‰€æœ‰ç»“æ„ä¿¡æ¯</strong>ã€‚è¿˜åŒ…æ‹¬åˆ—çš„å…ƒæ•°æ®åŠå…¶ç±»å‹ä¿¡æ¯ï¼›Used for è¯»å–å’Œå†™å…¥æ•°æ®ä»¥åŠå­˜å‚¨æ•°æ®çš„ç›¸åº”HDFSæ–‡ä»¶çš„åºåˆ—åŒ–ç¨‹åºå’Œååºåˆ—åŒ–æ•°æ®ã€‚ğŸ“</li>
<li>HIve Server: æ¥å—æ¥è‡ªä¸åŒå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶å°†å…¶æä¾›ç»™Hiveé©±åŠ¨ç¨‹åº</li>
<li>HIve Driver: æ¥æ”¶æ¥è‡ªä¸åŒæ¥æºçš„æŸ¥è¯¢ï¼Œå®ƒ <strong>å°†æŸ¥è¯¢ä¼ è¾“åˆ°ç¼–è¯‘å™¨</strong></li>
<li>HIve Compilerï¼šç›®çš„æ˜¯ <strong>è§£ææŸ¥è¯¢ğŸ”å¹¶å¯¹ä¸åŒçš„æŸ¥è¯¢å¿«å’Œè¡¨è¾¾å¼æ‰§è¡Œè¯­ä¹‰åˆ†æ</strong>ï¼Œ&ndash;&gt;å°†HQLè½¬åŒ–ä¸ºMapReduce Job</li>
</ul>
</li>
</ul>
<h2 id="2-hiveæ•°æ®æ¨¡å‹">2. HIveæ•°æ®æ¨¡å‹</h2>
<ul>
<li>
<h3 id="tables">Tables</h3>
<ul>
<li><strong>æ‰˜ç®¡è¡¨æˆ–å†…éƒ¨è¡¨</strong>ï¼šHIveåœ¨åˆ›å»ºè¡¨æ—¶çš„é»˜è®¤è¡¨ã€‚
<ul>
<li>ç‰¹ç‚¹ï¼šåœ¨å†…éƒ¨è¡¨è¢«åˆ é™¤åï¼Œè¡¨çš„å…ƒç´ æ®å’Œè¡¨æ•°æ®éƒ½ä»HDFSä¸­å®Œå…¨åˆ é™¤</li>
<li>é€‚ç”¨åœºæ™¯ï¼šğŸ‘¤ETLæ•°æ®æ¸…ç†æ­»ç”¨å†…éƒ¨è¡¨åšä¸­é—´è¡¨ï¼Œæ¸…ç†æ—¶HDFSä¸Šçš„æ–‡ä»¶åŒæ­¥æ¸…é™¤ğŸ†‘åœ¨è¯¯åˆ çš„æƒ…å†µä¸‹ï¼Œæ˜“äºå›å¤çš„æ•°æ®ï¼Œç”¨å†…éƒ¨è¡¨â²åœ¨ç»Ÿè®¡åˆ†ææ—¶ï¼Œä¸æ¶‰åŠæ•°æ®å…±äº«çš„æƒ…å†µ</li>
</ul>
</li>
<li>å¤–éƒ¨è¡¨ï¼šè¡¨ä¸­çš„æ•°æ®åˆ é™¤åä»»ç„¶åœ¨HDFSä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´åªä¼šåˆ é™¤ç›¸å…³çš„å…ƒæ•°æ®ï¼Œè€Œè¡¨çš„å†…å®¹ä¸ä¼šåˆ é™¤
<ul>
<li>å£°æ˜å¤–éƒ¨è¡¨çš„è¯­æ³•<code>create external table if not exists </code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Partiotion</p>
<ul>
<li><strong>é€šè¿‡åŸºäºä»»ä½•åˆ—æˆ–åˆ†åŒºé”®å°†ç›¸åŒç±»å‹çš„æ•°æ®åˆ†ç»„åœ¨ä¸€èµ·ï¼ŒHIveè¡¨è¢«ç»„ç»‡åœ¨åˆ†åŒºä¸­ï¼Œæ¯ä¸ªè¡¨éƒ½æœ‰ä¸€ä¸ªåˆ†åŒºé”®ç”¨äºè¡¨ç¤º</strong>ï¼Œåˆ†åŒºå¯ä»¥åŠ å¿«æŸ¥è¯¢å’Œåˆ‡ç‰‡è¿‡ç¨‹ã€‚</li>
<li><code>create table........... Patitioned BY(partition1 string,partition2 string)</code></li>
<li>åˆ†åŒºé€šè¿‡å‡å°‘å»¶è¿Ÿæ¥æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Œå› ä¸ºå®ƒåªæ‰«æç›¸å…³æ•°æ®ï¼Œè€Œä¸æ‰«æå®Œæ•´æ•°æ®</li>
</ul>
</li>
<li>
<p>åˆ†æ¡¶Buckets</p>
<ul>
<li>è¡¨æˆ–è€…åˆ†åŒºå¯ä»¥å†æ¬¡ç»†åˆ†ä¸ºBucketï¼Œå› æ­¤å¿…é¡»ä½¿ç”¨hashå‡½æ•°ï¼š</li>
<li>`create table&hellip;..patitioned B&hellip;.Clustered BY(clolumn 1 ,column 2) Sorted BY(column_name Asc:Desc,_) Into num_bucket Buckets;</li>
<li>åˆ†æ¡¶åªæ˜¯è¡¨ç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯åˆ†åŒºä¹Ÿå¯ä¸åˆ†åŒºï¼Œç”šè‡³å¯ä»¥é€‰æ‹©nä¸ªbucketå¯¹æ•°æ®è¿›è¡Œåˆ†åŒºã€‚ã€</li>
</ul>
</li>
</ul>
<h2 id="3hiveæ•°æ®ç±»å‹">3.Hiveæ•°æ®ç±»å‹</h2>
<ul>
<li>
<p>HIveæ˜¯ç”¨javaå¼€å‘çš„ï¼ŒHIveçš„åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”äºjavaçš„åŸºæœ¬æ•°æ®ç±»å‹ï¼šTINYINT-1,SMALLINT-2,INT-4,BIGINT-8;</p>
</li>
<li>
<p>å¤æ‚æ•°æ®ç±»å‹<code> create table tt(c1 ARRAY&lt;INT&gt;,c2 MAP&lt;STRING,INT&gt;,c3 STRUCT&lt;a:STRING,b:INT,c:DOUBLE&gt;);</code></p>
</li>
</ul>
<h2 id="4hiveserver2">4.HIveServer2</h2>
<ul>
<li>HiveServer2æ˜¯ä¸€ç§ä½¿å®¢æˆ·ç«¯èƒ½å¤Ÿå¯¹HIveæ‰§è¡ŒæŸ¥è¯¢çš„æœåŠ¡ï¼ˆhs1ç§°ä½œèŠ‚çº¦æœåŠ¡å™¨ï¼ŒåŸºäºThriftåè®®æ„å»ºï¼Œç”¨äºå¤„ç†HIveçš„è·¨å¹³å°é€šè®¯ï¼Œå®ƒå…è®¸ä¸åŒçš„å®¢æˆ·ç«¯å‘hiveæäº¤è¯·æ±‚å¹¶æ£€ç´¢æœ€åç»“æœï¼‰ã€‚<strong>ä½†æ˜¯å®ƒä¸å¤„ç†æ¥è‡ªå¤šä¸ªå®¢æˆ·ç«¯çš„å¹¶å‘è¯·æ±‚ï¼Œå› æ­¤è¢«Hs2æ›¿æ¢</strong>ğŸ·ğŸ·ğŸ·</li>
</ul>
<h3 id="41-hs2ä½“ç³»ç»“æ„">4.1 HS2ä½“ç³»ç»“æ„</h3>
<ul>
<li><strong>MetaStoreğŸ‘‹</strong>ï¼šåŸå­˜å‚¨å¯ä»¥é…ç½®ä¸º <strong>åµŒå…¥å¼</strong>æˆ– <strong>è¿œç¨‹æœåŠ¡å™¨</strong>ã€‚HS2ä¸metastoreé€šä¿¡ï¼Œä»¥è·å–æŸ¥è¯¢ç¼–è¯‘æ‰€éœ€è¦çš„å…ƒæ•°æ®
<ul>
<li>åµŒå…¥å¼ï¼šhiveæœåŠ¡å’ŒmetastoreæœåŠ¡è¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ï¼ŒderbyæœåŠ¡ä¹Ÿè¿è¡Œåœ¨è¯¥è¿›ç¨‹ä¸­ã€‚è¯¥æ¨¡å¼æ— éœ€ç‰¹æ®Šé…ç½®ã€‚</li>
<li>æœ¬åœ°æ¨¡å¼ï¼šhiveæœåŠ¡å’ŒmetastoreæœåŠ¡è¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œmysqlæ˜¯å•ç‹¬çš„è¿›ç¨‹ï¼Œå¯ä»¥åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥åœ¨è¿œç¨‹æœºå™¨ä¸Šã€‚è¯¥æ¨¡å¼åªéœ€å°†hive-site.xmlä¸­çš„ConnectionURLæŒ‡å‘mysqlï¼Œå¹¶é…ç½®å¥½é©±åŠ¨åã€æ•°æ®åº“è¿æ¥è´¦å·å³å¯</li>
<li>è¿œç¨‹æ¨¡å¼ï¼šhiveæœåŠ¡å’Œmetastoreåœ¨ä¸åŒçš„è¿›ç¨‹å†…ï¼Œå¯èƒ½æ˜¯ä¸åŒçš„æœºå™¨ã€‚  è¯¥æ¨¡å¼éœ€è¦å°†hive.metastore.localè®¾ç½®ä¸ºfalseï¼Œå¹¶å°†hive.metastore.urisè®¾ç½®ä¸ºmetastoreæœåŠ¡å™¨URIï¼Œå¦‚æœ‰å¤šä¸ªmetastoreæœåŠ¡å™¨ï¼ŒURIä¹‹é—´ç”¨é€—å·åˆ†éš”ã€‚metastoreæœåŠ¡å™¨URIçš„æ ¼å¼ä¸ºthrift://host:portã€‚</li>
</ul>
</li>
<li><strong>JDBC ClientğŸ¥</strong>ï¼šJDBCå®¢æˆ·ç«¯ä½¿ç”¨JDBCé©±åŠ¨ä¸HS2äº¤äº’
<ul>
<li>jdbcå¯åŠ¨ä¼ è¾“è¿æ¥ï¼Œé€šè¿‡ <strong>OpenSession API</strong>è°ƒç”¨è·å–ä¼šè¯å¥æŸ„åˆ›å»º <strong>HiveConnection</strong>ï¼Œ <strong>ç»˜ç”»ä½¿ä»æœåŠ¡å™¨ç«¯åˆ›å»º</strong></li>
<li>æ‰§è¡ŒHiveStatementï¼Œå¹¶ä»Thriftå®¢æˆ·æœºå‘å‡ºExecuteStatement APIè°ƒç”¨ã€‚åœ¨APIè°ƒç”¨ä¸­ï¼ŒSessionHandleä¿¡æ¯ä¸æŸ¥è¯¢ä¿¡æ¯ä¸€èµ·ä¼ é€’ç»™æœåŠ¡å™¨</li>
<li>HS2è¯·æ±‚é©±åŠ¨ç¨‹åºï¼ˆCommandProcessorï¼‰è¿›è¡ŒæŸ¥è¯¢è§£æå’Œç¼–è¯‘ã€‚é©±åŠ¨ç¨‹åºå¯åŠ¨ä¸€ä¸ªåå°jobï¼Œè¯¥jobä¸MApreduceå¯¹è¯ï¼Œç„¶åå‘å®¢æˆ·ç«¯è¿”å›å“åº”ï¼ˆåŒ…å«ä»æœåŠ¡å™¨ç«¯åˆ›å»ºçš„OperationHandleï¼‰</li>
<li>å®¢æˆ·ç«¯ä½¿ç”¨ohä¸hs2å¯¹è¯ï¼Œä»¥æŸ¥è¯¢æ‰§è¡ŒçŠ¶æ€</li>
</ul>
</li>
</ul>
<h2 id="5hiveç®¡ç†">5.Hiveç®¡ç†</h2>
<ul>
<li>
<p>Hiveä¸­çš„æ•°æ®åº“æè¿°äº†ä¸ºäº†ç›¸ä¼¼ç›®çš„æˆ–å±äºç›¸åŒç»„çš„è¡¨çš„é›†åˆã€‚ <strong>æ¯å½“åˆ›å»ºæ•°æ®åº“æ—¶ï¼ŒHIveéƒ½ä¼šåœ¨/user/Hive/warehouse</strong>å¤„ä¸ºæ¯ä¸ªæ•°æ®åº“åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œè¯¥ç›®å½•åœ¨HIve.metastore.warehouse.dirä¸­å®šä¹‰ã€‚</p>
</li>
<li>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">#æè¿°æ•°æ®åº“
describe database ....
#åˆ›å»ºå¸¦æœ‰æ³¨é‡Šçš„æ•°æ®åº“
create database if not exists t1 comment &#34;Its Niit Project&#34;
#ä½¿ç”¨dbpropertiesåˆ›å»ºæ•°æ®åº“
create database if not exists db2 with dbproperties(&#39;creator&#39;=&#39;Peter&#39;,&#39;date&#39;=&#39;2021-08-02&#39;);
#ç”¨dbpropertiesæè¿°æ•°æ®åº“
describe database extended t1;
#åˆ é™¤æ•°æ®åº“åŠå…¶æ‰€æœ‰è¡¨
deop database if exists æ•°æ®åº“å CASCADE;
#ä½¿ç”¨é€šé…ç¬¦
show databases like &#39;my.*&#39;;
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">Create</span><span class="w"> </span><span class="k">external</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="p">......</span><span class="w">
</span><span class="w"></span><span class="err">å½“ç”¨æˆ·åˆ›å»ºå†…éƒ¨è¡¨æ—¶ï¼Œå®ƒä¼šå°†æ•°æ®ç§»åŠ¨åˆ°ä»“åº“æŒ‡å‘çš„è·¯å¾„ã€‚å¦‚æœåˆ›å»ºäº†å¤–éƒ¨è¡¨çš„ï¼Œå®ƒåªä¼šè®°å½•æ•°æ®æ‰€åœ¨çš„è·¯å¾„ï¼Œè€Œä¸æ›´æ”¹æ•°æ®çš„ä½ç½®ã€‚</span><span class="w">
</span><span class="w"></span><span class="k">Create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">wdnmd</span><span class="p">()</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">delimited</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;åˆ†éš”ç¬¦&#39;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;\n&#39;</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">æ–‡ä»¶ç±»å‹ï¼ˆé»˜è®¤æ˜¯æ—¶</span><span class="n">TEXTFILE</span><span class="err">ï¼‰</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">åˆ›å»ºåˆ†åŒºè¡¨</span><span class="w">
</span><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">part_table</span><span class="p">()</span><span class="w"> </span><span class="n">partiotioned</span><span class="w"> </span><span class="k">by</span><span class="p">(</span><span class="n">ss</span><span class="w"> </span><span class="n">string</span><span class="p">)</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">delimited</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;\n&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">åˆ›å»ºåˆ†æ¡¶è¡¨</span><span class="w">
</span><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">test_bucket</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">)</span><span class="w"> </span><span class="n">partiotioned</span><span class="w"> </span><span class="k">by</span><span class="p">(</span><span class="n">ss</span><span class="w"> </span><span class="n">string</span><span class="p">)</span><span class="w"> </span><span class="n">clustered</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">buckets</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">delimited</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;\n&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">å¤åˆ¶è¡¨ç»“æ„</span><span class="w">
</span><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">test_liek_table</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="n">test_bucket</span><span class="p">;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="err">è¡¨é‡å‘½åï¼š</span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">table_name</span><span class="w"> </span><span class="k">rename</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">new_name</span><span class="w">
</span><span class="w"></span><span class="err">ä¿®æ”¹è¡¨çš„åˆ—ç±»å‹ï¼š</span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">table_name</span><span class="w">  </span><span class="n">old_column_name</span><span class="w"> </span><span class="n">new_column_name</span><span class="w"> </span><span class="n">column_type</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="err">æ·»åŠ åˆ—ï¼š</span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">table_nameadd</span><span class="w"> </span><span class="n">columns</span><span class="w"> </span><span class="p">(</span><span class="n">d</span><span class="w"> </span><span class="nb">int</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="err">æ›´æ”¹åˆ—åï¼š</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">table_name</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="n">new_name</span><span class="w"> </span><span class="n">string</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="err">åˆ é™¤åˆ—å¹¶åˆ›å»ºæ–°åˆ—åï¼š</span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">table_name</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="n">columns</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="n">name</span><span class="w"> </span><span class="n">string</span><span class="p">);</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="51æ‰˜ç®¡è¡¨å’Œå†…éƒ¨è¡¨">5.1æ‰˜ç®¡è¡¨å’Œå†…éƒ¨è¡¨</h3>
<ul>
<li>
<p>å†…éƒ¨è¡¨çš„ç‰¹ç‚¹</p>
<ul>
<li>
<p>å†…éƒ¨è¡¨ç”±hiveæ§åˆ¶</p>
</li>
<li>
<p><strong>è®¿é—®å†…éƒ¨è¡¨çš„æ•°æ®å”¯ä¸€çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨hive</strong>ã€‚æ— è®ºæ•°æ®çš„ä½ç½®æ˜¯HDFSè¿˜æ˜¯hiveè‡ªå·±çš„ä»“åº“ç›®å½•ï¼Œ<strong>HIveä¸å…è®¸å…¶ä»–çš„ä»»ä½•åº”ç”¨ç¨‹åºè®¿é—®è¯¥æ•°æ®</strong>Â®Â®Â®Â®</p>
</li>
<li>
<p>å¦‚æœå¿…é¡»è®¿é—®å†…éƒ¨è¡¨çš„æ•°æ®ï¼Œåªèƒ½å¯¹è¯¥è¡¨ä½¿ç”¨HIveæŸ¥è¯¢</p>
</li>
</ul>
</li>
<li>
<p>å¤–éƒ¨è¡¨çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åªæœ‰å­˜å‚¨åœ¨metastoreçš„å…ƒæ•°æ®ç”±hiveæ§åˆ¶</li>
</ul>
</li>
</ul>
<h3 id="52-å°†æ•°æ®åŠ è½½åˆ°hive">5.2 å°†æ•°æ®åŠ è½½åˆ°Hive</h3>
<ul>
<li>åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼ŒLOCALå…³é”®è¯æŒ‡å®šæ–‡ä»¶åœ¨ä¸»æœºä¸­çš„ä½ç½®ã€‚ <strong>å¦‚æœæœªæŒ‡å®šLOCALå…³é”®å­—ï¼Œå°†ä»inpathä¹‹åæŒ‡å®šçš„URIæˆ–fs.default.name Hiveå±æ€§ä¸­çš„å€¼åŠ è½½æ–‡ä»¶ï¼Œè€ŒOverriteå†³å®šæ˜¯è¿½åŠ è¿˜æ˜¯æ›¿æ¢ç°æœ‰æ•°æ®</strong></li>
<li>æœ¬åœ°ï¼š<code>load data local inpath '/////' into table table_name</code></li>
<li>HDFS:<code>load data inpath '/user/.../... into table table_name'</code></li>
</ul>
<h3 id="hiveåˆ†åŒº">ğŸ¥ğŸ¥Hiveåˆ†åŒºğŸ¥ğŸ¥</h3>
<ul>
<li>åˆ†åŒºçš„é‡è¦æ€§
<ul>
<li>åˆ†åŒºæ˜¯ä¸€ç§æ ¹æ®ç‰¹å®šåˆ—çš„å€¼å°†è¡¨åˆ’åˆ†ä¸ºç›¸å…³éƒ¨åˆ†çš„æ–¹æ³•â²å…ˆæä¸€ä¸‹HIveåœ¨æŸ¥è¯¢ä¸­çš„ä½œç”¨ï¼šhiveå°†SQLæŸ¥è¯¢è½¬æ¢ä¸ºMapreduceä½œä¸šï¼Œç„¶åå°†å…¶æäº¤åˆ°Hadoopé›†ç¾¤ã€‚æäº¤SQLæŸ¥è¯¢æ—¶ï¼ŒHIveè¯»å–æ•´ä¸ªæ•°æ®é›†ã€‚</li>
</ul>
</li>
</ul>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    <aside class="related-contents--wrapper">
    
    
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (DISQUS) {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2022 AllForOne&#39;s Site,Your genneration comes!
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.8.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    
        <aside class="sidebar right-sidebar sticky">
            <section class="widget archives">
                <div class="widget-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



                </div>
                <h2 class="widget-title section-title">Table of contents</h2>
                
                <div class="widget--toc">
                    <nav id="TableOfContents">
  <ol>
    <li><a href="#1hive-introduction">1.Hive Introduction</a></li>
    <li><a href="#2-hiveæ•°æ®æ¨¡å‹">2. HIveæ•°æ®æ¨¡å‹</a>
      <ol>
        <li><a href="#tables">Tables</a></li>
      </ol>
    </li>
    <li><a href="#3hiveæ•°æ®ç±»å‹">3.Hiveæ•°æ®ç±»å‹</a></li>
    <li><a href="#4hiveserver2">4.HIveServer2</a>
      <ol>
        <li><a href="#41-hs2ä½“ç³»ç»“æ„">4.1 HS2ä½“ç³»ç»“æ„</a></li>
      </ol>
    </li>
    <li><a href="#5hiveç®¡ç†">5.Hiveç®¡ç†</a>
      <ol>
        <li><a href="#51æ‰˜ç®¡è¡¨å’Œå†…éƒ¨è¡¨">5.1æ‰˜ç®¡è¡¨å’Œå†…éƒ¨è¡¨</a></li>
        <li><a href="#52-å°†æ•°æ®åŠ è½½åˆ°hive">5.2 å°†æ•°æ®åŠ è½½åˆ°Hive</a></li>
        <li><a href="#hiveåˆ†åŒº">ğŸ¥ğŸ¥Hiveåˆ†åŒºğŸ¥ğŸ¥</a></li>
      </ol>
    </li>
  </ol>
</nav>
                </div>
            </section>
        </aside>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/AllForOne/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
